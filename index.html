<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>The Youngs' Christmas Countdown</title>
  <style>
    :root {
      --bg: #0a1a0f; /* Deep Forest Green */
      --card: rgba(255, 255, 255, 0.08);
      --text: #ffffff;
      --muted: #d1d5db;
      --accent: #d4af37; /* Gold */
      --holiday-red: #b91c1c;
      --border: rgba(255, 255, 255, 0.15);
    }
    
    * { box-sizing: border-box; }
    
    body {
      margin: 0;
      font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
      background: radial-gradient(circle at top, #1e3a24, var(--bg));
      color: var(--text);
      min-height: 100vh;
      overflow-x: hidden;
    }

    /* Falling Snow Animation */
    body::before {
      content: "‚ùÑ";
      position: fixed;
      top: -10%;
      left: 10%;
      font-size: 20px;
      color: white;
      opacity: 0.3;
      animation: snow 10s linear infinite;
      text-shadow: 20vw 10vh 0 white, 60vw 30vh 0 white, 40vw 50vh 0 white;
      z-index: -1;
    }

    @keyframes snow {
      0% { transform: translateY(0); }
      100% { transform: translateY(110vh); }
    }

    .wrap { max-width: 600px; margin: 0 auto; padding: 20px 15px; }

    h1 { 
      text-align: center; 
      color: var(--accent); 
      font-family: serif; 
      font-size: 28px;
      margin-bottom: 5px;
    }

    .sub { text-align: center; color: var(--muted); margin-bottom: 20px; font-style: italic; }

    /* Photos */
    .hero {
      height: 200px;
      border-radius: 20px;
      overflow: hidden;
      border: 3px solid var(--accent);
      margin-bottom: 20px;
      position: relative;
    }
    .hero img {
      position: absolute; inset: 0;
      width: 100%; height: 100%;
      object-fit: cover;
      opacity: 0;
      animation: fade 15s infinite;
    }
    .hero img:nth-child(1) { animation-delay: 0s; }
    .hero img:nth-child(2) { animation-delay: 5s; }
    .hero img:nth-child(3) { animation-delay: 10s; }

    @keyframes fade {
      0%, 20% { opacity: 0; }
      30%, 70% { opacity: 1; }
      80%, 100% { opacity: 0; }
    }

    /* Cards */
    .card {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 20px;
      padding: 18px;
      margin-bottom: 15px;
      backdrop-filter: blur(10px);
      box-shadow: 0 4px 15px rgba(0,0,0,0.3);
    }

    .label { color: var(--accent); font-size: 11px; text-transform: uppercase; letter-spacing: 2px; font-weight: bold; }
    .title { font-size: 22px; margin: 10px 0; font-weight: 800; }
    .countdown { font-size: 34px; font-weight: 800; color: var(--holiday-red); text-shadow: 0 0 10px rgba(185, 28, 28, 0.3); }

    /* Weather Styling */
    .weather-box { display: flex; align-items: center; justify-content: space-between; margin-top: 10px; }
    .temp { font-size: 28px; font-weight: bold; }
    .condition { color: var(--muted); text-transform: capitalize; }

    /* List Items */
    .event { padding: 12px; border-bottom: 1px solid var(--border); transition: background 0.3s; cursor: pointer; }
    .event:last-child { border: none; }
    .event-header { display: flex; justify-content: space-between; align-items: center; }
    .event-name { font-weight: bold; font-size: 16px; margin: 0; }
    .event-time { font-size: 13px; color: var(--muted); margin-top: 4px; }
    
    .event-details { 
      max-height: 0; 
      overflow: hidden; 
      transition: max-height 0.3s ease-out; 
      font-size: 14px; 
      color: var(--muted);
      background: rgba(0,0,0,0.2);
      border-radius: 10px;
    }
    .event.open .event-details { max-height: 200px; padding: 10px; margin-top: 10px; }
    .mini-countdown { color: var(--accent); font-weight: bold; margin-top: 5px; font-family: monospace; }

    .btn {
      background: var(--holiday-red);
      color: white;
      border: none;
      padding: 10px 15px;
      border-radius: 12px;
      cursor: pointer;
      font-weight: bold;
      text-decoration: none;
      display: inline-block;
      margin-top: 10px;
    }
    .btn-outline { background: transparent; border: 1px solid var(--accent); color: var(--accent); margin-left: 5px;}

  </style>
</head>
<body>

<div class="wrap">
  <h1>Youngs' Christmas</h1>
  <p class="sub">Countdown to Mom's Visit</p>

  <div class="hero">
    <img src="images/hero1.jpg" alt="Holiday Memory 1">
    <img src="images/hero2.jpg" alt="Holiday Memory 2">
    <img src="images/hero3.jpg" alt="Holiday Memory 3">
  </div>

  <div class="card" id="mainCard">
    <div class="label">Coming Up Next</div>
    <div class="title" id="nextTitle">Loading...</div>
    <div class="countdown" id="nextCountdown">00d 00h 00m 00s</div>
    <div id="nextWhen" style="font-size: 14px; color: var(--muted); margin-top: 5px;"></div>
  </div>

  <div class="card">
    <div class="label">Timberlea Weather</div>
    <div class="weather-box" id="weatherBox">
      <div>
        <div class="temp" id="currTemp">--¬∞C</div>
        <div class="condition" id="currCond">Fetching...</div>
      </div>
      <a href="https://www.theweathernetwork.com/ca/weather/nova-scotia/timberlea" class="btn" target="_blank">Full Map</a>
    </div>
  </div>

  <div class="card">
    <div class="label">The Holiday Schedule</div>
    <div id="eventList"></div>
    <button class="btn btn-outline" style="width:100%; margin-top:15px;" id="toggleEvents">Show All</button>
  </div>

  <div style="text-align: center;">
    <a href="memories.html" class="btn" style="background: var(--accent); color: black; font-size: 18px; width: 100%;">üéÑ View Christmas Memories</a>
  </div>
</div>

<script>
  const EVENTS = [
    { name: "Chad leaves Timberlea", iso: "2025-12-22T07:00:00-04:00", notes: "Heading to Saint John for pickup. Pickup at 12:30 PM." },
    { name: "Pickup Mom (Saint John)", iso: "2025-12-22T12:30:00-04:00", notes: "Costco visit then drive to Cambridge Narrows." },
    { name: "Leave Cambridge Narrows", iso: "2025-12-23T10:00:00-04:00", notes: "Stop at Deluxe French Fries (Truro) on way back!" },
    { name: "Halifax Forum Bingo", iso: "2025-12-23T19:30:00-04:00", notes: "Doors open 5:00 PM. Arrive early for parking." },
    { name: "Wizard of Oz", iso: "2025-12-24T14:00:00-04:00", notes: "Neptune Theatre. Parking plan TBD." }
  ];

  function updateWeather() {
    // Open-Meteo for Timberlea (Halifax coords approx)
    fetch('https://api.open-meteo.com/v1/forecast?latitude=44.6488&longitude=-63.5752&current_weather=true')
      .then(res => res.json())
      .then(data => {
        document.getElementById('currTemp').textContent = Math.round(data.current_weather.temperature) + "¬∞C";
        document.getElementById('currCond').textContent = "Current Conditions";
      }).catch(() => {
        document.getElementById('currCond').textContent = "Weather unavailable";
      });
  }

  function formatTime(ms) {
    if (ms < 0) return "Started!";
    const d = Math.floor(ms / 86400000);
    const h = Math.floor((ms % 86400000) / 3600000);
    const m = Math.floor((ms % 3600000) / 60000);
    const s = Math.floor((ms % 60000) / 1000);
    return `${d}d ${h}h ${m}m ${s}s`;
  }

  function renderEvents() {
    const list = document.getElementById('eventList');
    list.innerHTML = '';
    const now = new Date();

    EVENTS.forEach((ev, i) => {
      const evDate = new Date(ev.iso);
      const row = document.createElement('div');
      row.className = 'event';
      row.innerHTML = `
        <div class="event-header">
          <div>
            <p class="event-name">${ev.name}</p>
            <p class="event-time">${evDate.toLocaleString([], {weekday:'short', month:'short', day:'numeric', hour:'2-digit', minute:'2-digit'})}</p>
          </div>
          <span style="color:var(--accent)">‚ñº</span>
        </div>
        <div class="event-details">
          ${ev.notes}
          <div class="mini-countdown" id="mini-${i}"></div>
        </div>
      `;
      row.onclick = () => row.classList.toggle('open');
      list.appendChild(row);
    });
  }

  function tick() {
    const now = new Date();
    let next = null;

    EVENTS.forEach((ev, i) => {
      const diff = new Date(ev.iso) - now;
      const mini = document.getElementById(`mini-${i}`);
      if (mini) mini.textContent = "Countdown: " + formatTime(diff);
      
      if (!next && diff > 0) next = ev;
    });

    if (next) {
      document.getElementById('nextTitle').textContent = next.name;
      document.getElementById('nextCountdown').textContent = formatTime(new Date(next.iso) - now);
      document.getElementById('nextWhen').textContent = new Date(next.iso).toLocaleString();
    }
  }

  updateWeather();
  renderEvents();
  setInterval(tick, 1000);
</script>

</body>
</html>
