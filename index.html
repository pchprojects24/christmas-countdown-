<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>The Youngs' Christmas Countdown</title>
  <style>
    :root{
      --bg:#0b1220;
      --card:#0f1a2e;
      --text:#f3f4f6;
      --muted:#b6c2d9;
      --accent:#fbbf24;
      --border:rgba(255,255,255,.10);
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:-apple-system,system-ui,Segoe UI,Roboto,Arial,sans-serif;
      background:radial-gradient(1200px 700px at 30% -10%, rgba(251,191,36,.15), transparent 55%),
                 radial-gradient(1200px 700px at 80% 10%, rgba(34,211,238,.10), transparent 60%),
                 var(--bg);
      color:var(--text);
    }
    .wrap{max-width:720px;margin:0 auto;padding:18px 14px 28px}
    h1{margin:8px 0 10px;font-size:22px;letter-spacing:.2px}
    .sub{color:var(--muted);margin:0 0 14px;font-size:14px}

    /* Hero (3-photo slow crossfade) */
    .hero{
      position:relative;
      height:170px;
      border-radius:18px;
      overflow:hidden;
      border:1px solid var(--border);
      background:#0a0f1a;
      margin:10px 0 16px;
    }
    .hero img{
      position:absolute; inset:0;
      width:100%; height:100%;
      object-fit:cover;
      opacity:0;
      animation:fade 21s infinite;
      transform:scale(1.02);
    }
    .hero img:nth-child(1){animation-delay:0s}
    .hero img:nth-child(2){animation-delay:7s}
    .hero img:nth-child(3){animation-delay:14s}
    @keyframes fade{
      0%{opacity:0}
      10%{opacity:1}
      33%{opacity:1}
      43%{opacity:0}
      100%{opacity:0}
    }
    .hero::after{
      content:"";
      position:absolute; inset:0;
      background:linear-gradient(to top, rgba(11,18,32,.75), rgba(11,18,32,.10) 55%, rgba(11,18,32,.35));
      pointer-events:none;
    }

    .card{
      background:rgba(15,26,46,.9);
      border:1px solid var(--border);
      border-radius:18px;
      padding:14px;
      margin:12px 0;
      backdrop-filter: blur(6px);
    }
    .label{color:var(--muted);font-size:12px;letter-spacing:.14em;text-transform:uppercase}
    .title{font-size:18px;margin:6px 0 6px;font-weight:700}
    .countdown{
      font-size:38px;
      font-weight:800;
      letter-spacing:.5px;
      margin:6px 0 2px;
    }
    .when{color:var(--muted);font-size:14px;margin:0}
    .hint{color:var(--muted);font-size:13px;margin:8px 0 0}

    .list{margin-top:10px}
    .event{
      display:flex;
      gap:10px;
      align-items:flex-start;
      padding:12px 10px;
      border-radius:14px;
      border:1px solid transparent;
    }
    .event + .event{margin-top:8px}
    .event:hover{border-color:var(--border)}
    .num{
      width:30px;height:30px;flex:0 0 30px;
      border-radius:10px;
      border:1px solid var(--border);
      display:flex;align-items:center;justify-content:center;
      color:var(--accent);font-weight:700;
      background:rgba(0,0,0,.15);
    }
    .event-main{flex:1}
    .event-name{margin:0;font-weight:700}
    .event-time{margin:3px 0 0;color:var(--muted);font-size:13px}
    .btn{
      flex:0 0 auto;
      border:1px solid var(--border);
      background:rgba(0,0,0,.15);
      color:var(--text);
      border-radius:12px;
      padding:8px 10px;
      font-size:13px;
      cursor:pointer;
    }
    .btn:active{transform:translateY(1px)}
    .notes{
      margin-top:8px;
      display:none;
      color:var(--muted);
      font-size:13px;
      line-height:1.35;
      padding:10px;
      border-radius:12px;
      border:1px solid var(--border);
      background:rgba(0,0,0,.18);
      white-space:pre-wrap;
    }
    .event.open .notes{display:block}

    .actions{display:flex;gap:10px;flex-wrap:wrap;margin-top:10px}
    a.action{
      text-decoration:none;
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding:10px 12px;
      border-radius:14px;
      border:1px solid var(--border);
      background:rgba(0,0,0,.12);
      color:var(--text);
      font-weight:600;
      font-size:14px;
    }

    .footer{color:var(--muted);font-size:12px;margin-top:14px;text-align:center}
  </style>
</head>

<body>
  <div class="wrap">
    <h1>The Youngsâ€™ Christmas Countdown</h1>
    <p class="sub">A simple plan page for the holidays.</p>

    <!-- 3-photo hero fade -->
    <div class="hero" aria-label="Christmas photos">
      <img src="images/hero1.jpg" alt="">
      <img src="images/hero2.jpg" alt="">
      <img src="images/hero3.jpg" alt="">
    </div>

    <!-- Next up -->
    <div class="card" id="nextCard">
      <div class="label">Next up</div>
      <div class="title" id="nextTitle">â€”</div>
      <div class="countdown" id="nextCountdown">â€”</div>
      <p class="when" id="nextWhen">â€”</p>
      <p class="hint" id="nextHint"></p>
    </div>

    <!-- Upcoming (collapsed by default) -->
    <div class="card">
      <div class="label">Upcoming events</div>
      <div class="list" id="eventList"></div>
      <div class="actions" style="margin-top:12px">
        <button class="btn" id="toggleAllBtn">Show all events</button>
      </div>
    </div>

    <!-- Utilities -->
    <div class="card">
      <div class="label">Helpful links</div>
      <div class="actions">
        <!-- Replace these links with exactly what you want -->
        <a class="action" href="https://511.novascotia.ca/" target="_blank" rel="noopener">ðŸŒ¦ Roads (NS 511)</a>
        <a class="action" href="https://www.511nb.ca/" target="_blank" rel="noopener">ðŸŒ¦ Roads (NB 511)</a>
        <a class="action" href="memories.html">ðŸŽ„ Christmas Memories</a>
      </div>
    </div>

    <div class="footer" id="lastUpdated">Last updated: â€”</div>
  </div>

  <script>
    // ====== YOU EDIT THIS LIST ONLY ======
    // Times are in Atlantic time (Halifax). Use ISO with timezone offset -04:00.
    // If Atlantic shifts to -03:00 during daylight time, change offset accordingly.
    const EVENTS = [
      {
        id: "leave-timberlea",
        name: "Chad leaves Timberlea",
        whenISO: "2025-12-22T07:00:00-04:00", // <-- set your departure time
        whenText: "Mon Dec 22 Â· 7:00 AM",
        hint: "Heading to Saint John for pickup.",
        notes: "Drive to Saint John.\nPickup at 12:30 PM.\nCostco after pickup, then Cambridge Narrows."
      },
      {
        id: "pickup-mom",
        name: "Pickup Mom (Saint John)",
        whenISO: "2025-12-22T12:30:00-04:00",
        whenText: "Mon Dec 22 Â· 12:30 PM",
        notes: "After pickup: Costco Saint John.\nThen drive to Cambridge Narrows.\nOvernight at Mom's home."
      },
      {
        id: "leave-cambridge",
        name: "Leave Cambridge Narrows",
        whenISO: "2025-12-23T10:00:00-04:00",
        whenText: "Tue Dec 23 Â· 10:00 AM",
        notes: "Drive back toward Timberlea.\nQuick pickup stop: Deluxe French Fries (Truro) to bring home.\nGoal: home by ~3:00 PM."
      },
      {
        id: "bingo",
        name: "Halifax Forum Bingo (main start)",
        whenISO: "2025-12-23T19:30:00-04:00",
        whenText: "Tue Dec 23 Â· 7:30 PM",
        notes: "Doors open 5:00 PM.\nWarm-up 6:15 PM.\nAim to arrive early for parking/seats."
      },
      {
        id: "oz",
        name: "Wizard of Oz (Neptune Theatre)",
        whenISO: "2025-12-24T14:00:00-04:00",
        whenText: "Wed Dec 24 Â· 2:00 PM",
        notes: "Neptune Theatre.\nLeave time TBD.\nParking plan TBD."
      },
      {
        id: "marice-drives-back",
        name: "Marice drives Mom back to New Brunswick",
        whenISO: null,
        whenText: "Sat Dec 27 Â· time TBD",
        notes: "Timing to be determined.\nAfter drop-off: Marice may stay 1â€“2 nights with her mother (TBD)."
      },
      {
        id: "marice-returns",
        name: "Marice returns to Timberlea",
        whenISO: null,
        whenText: "Date/time TBD",
        notes: "Timing to be determined."
      }
    ];

    // Set this manually whenever you update the repo:
    const LAST_UPDATED_TEXT = "Dec 17, 2025";

    // ====== RENDERING ======
    const listEl = document.getElementById("eventList");
    const toggleBtn = document.getElementById("toggleAllBtn");
    const lastUpdatedEl = document.getElementById("lastUpdated");

    const nextTitleEl = document.getElementById("nextTitle");
    const nextCountdownEl = document.getElementById("nextCountdown");
    const nextWhenEl = document.getElementById("nextWhen");
    const nextHintEl = document.getElementById("nextHint");

    lastUpdatedEl.textContent = "Last updated: " + LAST_UPDATED_TEXT;

    let showAll = false;

    function formatCountdown(ms) {
      if (ms <= 0) return "Now";
      const totalSec = Math.floor(ms / 1000);
      const days = Math.floor(totalSec / 86400);
      const hours = Math.floor((totalSec % 86400) / 3600);
      const mins = Math.floor((totalSec % 3600) / 60);
      const secs = totalSec % 60;
      return `${days}d ${String(hours).padStart(2,"0")}h ${String(mins).padStart(2,"0")}m ${String(secs).padStart(2,"0")}s`;
    }

    function getUpcoming() {
      const now = new Date();
      return EVENTS
        .map(e => ({...e, date: e.whenISO ? new Date(e.whenISO) : null}))
        .sort((a,b) => {
          if (!a.date && !b.date) return 0;
          if (!a.date) return 1;
          if (!b.date) return -1;
          return a.date - b.date;
        });
    }

    function findNextEvent(sorted) {
      const now = new Date();
      for (const e of sorted) {
        if (!e.date) continue;
        if (e.date - now > 0) return e;
      }
      // If none upcoming with dates, fallback to first TBD or first item.
      return sorted[0] || null;
    }

    function renderList(sorted, nextId) {
      listEl.innerHTML = "";
      const visibleCount = showAll ? sorted.length : 3;

      let num = 1;
      for (let i=0; i<sorted.length; i++) {
        const e = sorted[i];
        if (i >= visibleCount) break;

        const row = document.createElement("div");
        row.className = "event";
        row.dataset.id = e.id;

        const numEl = document.createElement("div");
        numEl.className = "num";
        numEl.textContent = num++;

        const main = document.createElement("div");
        main.className = "event-main";

        const name = document.createElement("p");
        name.className = "event-name";
        name.textContent = e.name;

        const time = document.createElement("p");
        time.className = "event-time";
        time.textContent = e.whenText || "â€”";

        const notes = document.createElement("div");
        notes.className = "notes";
        notes.textContent = e.notes || "";

        main.appendChild(name);
        main.appendChild(time);
        main.appendChild(notes);

        const btn = document.createElement("button");
        btn.className = "btn";
        btn.type = "button";
        btn.textContent = "Notes";
        btn.addEventListener("click", () => {
          row.classList.toggle("open");
        });

        row.appendChild(numEl);
        row.appendChild(main);
        row.appendChild(btn);

        listEl.appendChild(row);
      }

      toggleBtn.textContent = showAll ? "Hide extra events" : "Show all events";
    }

    function renderNext(next) {
      if (!next) {
        nextTitleEl.textContent = "No events set";
        nextCountdownEl.textContent = "â€”";
        nextWhenEl.textContent = "â€”";
        nextHintEl.textContent = "";
        return;
      }
      nextTitleEl.textContent = next.name;
      nextWhenEl.textContent = next.whenText || "â€”";
      nextHintEl.textContent = next.hint || "";
    }

    function tick(next) {
      if (!next || !next.date) {
        nextCountdownEl.textContent = "â€”";
        return;
      }
      const now = new Date();
      const ms = next.date - now;
      nextCountdownEl.textContent = formatCountdown(ms);
    }

    function init() {
      const sorted = getUpcoming();
      const next = findNextEvent(sorted);
      renderNext(next);
      renderList(sorted, next ? next.id : null);

      toggleBtn.addEventListener("click", () => {
        showAll = !showAll;
        renderList(sorted, next ? next.id : null);
      });

      tick(next);
      setInterval(() => tick(next), 1000);
    }

    init();
  </script>
</body>
</html>
